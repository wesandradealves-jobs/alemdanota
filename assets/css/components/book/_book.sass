@keyframes pageForwards
    0% 
        left: calc(50% + 15px)
        transform: perspective(6000px) rotateY(0)
    100%
        left: calc(50% - 15px
        transform: perspective(6000px) rotateY(-180deg)
@keyframes pageBackwards
    0% 
        left: calc(50% - 15px
        transform: perspective(6000px) rotateY(-180deg)
    100%
        left: calc(50% + 15px)
        transform: perspective(6000px) rotateY(0deg)

.-shadowed
    +shadow(0px, 0px, 0px, 7px, $darkblue)

.book
    height: 414.85pt
    +mq('768px', max)
        height: 710px
    +mq('434px', max) 
        height: auto
    margin: 0 auto 35px
    +mq('737px', max)
        margin: 0 auto 85px
    max-width: calc(359.956pt*2)
    position: relative
    width: 100%
    +mq('1030px', max)
        width: calc(100% - 180px)
    +mq('768px', max)
        width: calc(100% - 105px)
    +mq('434px', max) 
        width: calc(100% - 40px)
    &::after
        background-color: $darkblue
        content: ""
        display: block
        +mq('434px', max) 
            display: none
        height: 100%
        left: calc(50% + 15px) 
        position: absolute 
        top: 0
        width: 50%
        z-index: 1
        @extend .-shadowed
    &-pagination
        align-items: flex-start
        @extend .flex
        flex-flow: column wrap 
        justify-content: flex-start
        left: -60px
        position: absolute 
        top: 0
        z-index: 1
        +mq('768px', max)
            align-items: center 
            bottom: -55px
            flex-flow: row wrap 
            justify-content: center
            left: 0
            top: initial
            width: 100%        
        >*
            +mq('1031px', min)
                @for $i from 1 through 99
                    &:nth-child(#{$i})
                        @include animation(opacity,(10s*$i)/50)   
            +mq('768px', max)
                margin-left: 5px
                margin-right: 5px                        
            &:not(:last-child)
                margin-bottom: 5px
                +mq('768px', max)
                    margin-bottom: 0
            &.-active
                background-color: $yellow
            background-color: $darkblue                
            height: 15px
            width: 15px
            +mq('434px', max)
                height: 10px
                width: 10px
    &-navigation
        align-items: center 
        @extend .flex
        flex-flow: row wrap 
        justify-content: space-between
        position: absolute 
        top: 50%
        +mq('768px', max)
            bottom: -70px
            top: initial
        +mq('434px', max) 
            bottom: -63px
        width: 100%
        z-index: 1
        +mq('768px', max)
            z-index: 3
        .navigator
            background-color: transparent
            cursor: pointer
            height: 45px
            left: -80px
            +mq('768px', max)
                left: 0
            position: relative
            right: initial
            transform: rotate(90deg)
            transform-origin: center center 
            width: 45px
            +mq('1030px', max)
                height: 45px
                width: 45px
            +mq('434px', max) 
                height: 25px
                width: 25px
            &:nth-child(1)
                @keyframes ltr
                    0% 
                        left: 0
                        opacity: 0
                    100% 
                        left: -80px
                        opacity: 1    
                +mq('1031px', min)
                    +animation('ltr', 500ms)              
            &:nth-child(2)
                @keyframes rtl
                    0% 
                        right: 0
                        opacity: 0
                    100% 
                        right: -80px
                        opacity: 1    
                left: initial
                right: -80px
                +mq('768px', max)
                    right:: 0
                +mq('1031px', min)
                    +animation('rtl', 500ms)
                transform: rotate(-90deg)
            svg,img 
                display: block
                height: 100% 
                width: 100%
    &-pages 
        display: block 
        height: 100%
        position: relative
        z-index: 2
        width: 100%
        &::before,
        &::after
            background: url(assets/imgs/book-divisor.png) center 8px repeat transparent
            content: ""
            display: block 
            height: 100%
            left: calc(50% - 30px/2)
            position: absolute 
            top: 0
            width: 30px
            z-index: 1
        &::before
            background: url(assets/imgs/book-divisor-mobile.png) -17px center repeat-x transparent
            left: 0
            position: relative
            height: 30px
            width: 100%
        +mq('435px', min) 
            &::before
                display: none
        +mq('434px', max) 
            &::after
                display: none 
            &::before
                display: block          
        > .book-page
            cursor: grab
            &:hover
                cursor: grabbing
            display: block 
            height: 100%
            +mq('434px', max) 
                height: auto
                min-height: 496px
            left: calc(50% + 15px)
            +mq('434px', max) 
                left: 0
            overflow: hidden
            position: absolute 
            +mq('434px', max) 
                position: relative
            transform-style: preserve-3d   
            transform-origin: 0 50%
            transform: perspective(6000px) rotateY(0deg)            
            width: 50%
            +mq('434px', max) 
                width: 100%
            >.book-page-content
                height: 100%
                +mq('434px', max) 
                    height: auto
                    min-height: 496px
                transform-origin: center center
                >p 
                    color: black
                    font-family: 'Mosk Medium 500'
                    transform: scale(1.03)
                    +rem(('line-height' : 22px, 'font-size' : 12px)) 
            +mq('768px', min)
                &:not(:first-child):not(:last-child)
                    background-repeat: repeat, no-repeat, no-repeat, no-repeat
                    &:nth-child(odd)
                        background-image: url(assets/imgs/paperline.png), url(assets/imgs/running-boy-book.png), url(assets/imgs/boy-book.png)
                        background-position: 0 0, calc(100% - 30px) calc(100% - 30px), calc(50% - 130px) calc(100% - 50px)
                    &:nth-child(even)                    
                        background-image: url(assets/imgs/paperline.png), url(assets/imgs/sun-book.png), url(assets/imgs/love-me-book.png), url(assets/imgs/scratches-book.png)
                        background-position: 0 0,calc(100% - 30px) calc(100% - 30px),calc(100% - 30px) calc(100% - 80px),calc(50% - 100px) calc(100% - 30px)
            &:not(:first-child)
                +mq('434px', max) 
                    display: none
                background-color: white 
                background-position: 0 0
                background-repeat: repeat
                background-image: url(assets/imgs/paperline.png)
                +shadow(0px, 0px, 15px, -10px, black)
                >.book-page-content
                    padding: 25px 50px 0 
                    +mq('768px', max)
                        padding: 25px 50px 30px
                    &::after,
                    &::before
                        background-color: coral 
                        content: ""
                        display: block 
                        height: 100%
                        left: 22px
                        position: absolute 
                        top: 0
                        width: 1px
                    &::after
                        left: initial
                        right: 22px       
                    &.-centered
                        align-items: center
                        @extend .flex
                        flex-flow: column wrap 
                        justify-content: center 
                        padding: 0 0 25px              
            &.-flip
                animation: pageForwards 4s forwards
                +mq('434px', max) 
                    animation: none 
                &+.-flip
                    animation: pageForwards 6s forwards
                    +mq('434px', max) 
                        animation: none
            &.-flip-over
                animation: pageBackwards 4s forwards
                +mq('434px', max) 
                    animation: none
            &:first-child
                @extend .-shadowed
                +mq('434px', max) 
                    svg,img
                        display: block
                        left: 0
                        position: absolute 
                        top: 0 
                &.-flip+.-flip
                    animation: pageForwards 4.2s forwards       
                    +mq('434px', max) 
                        animation: none        